{"version":3,"sources":["webpack:///webpack/bootstrap 03e6d7359fe9596f16d1","webpack:///./packages/runtime-shared/src/promise.js"],"names":["noop","asap","setImmediate","fn","setTimeout","onUnhandledRejection","err","console","log","bind","thisArg","apply","arguments","Promise","TypeError","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","push","cb","onFulfilled","onRejected","resolve","reject","promise","ret","e","newValue","then","finale","length","i","len","Handler","done","value","reason","ex","prototype","catch","prom","constructor","all","arr","args","Array","slice","call","remaining","res","val","race","values","_setImmediateFn","_setUnhandledRejectionFn","module","exports"],"mappings":"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","file":"promise.function.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 03e6d7359fe9596f16d1","/* eslint no-extend-native: \"off\" */\n\nfunction noop() {}\n\n// Use polyfill for setImmediate for performance gains\nvar asap = typeof setImmediate === 'function' && setImmediate ||\n  function(fn) {\n    if (typeof setTimeout === 'function') {\n      setTimeout(fn, 0);\n    } else {\n      fn();\n    }\n  };\n\nvar onUnhandledRejection = function(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.log('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('Promise resolver is not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  asap(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n    if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    asap(function() {\n      if (!self._handled) {\n        onUnhandledRejection(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(function(value) {\n      if (done) return;\n      done = true;\n      resolve(self, value);\n    }, function(reason) {\n      if (done) return;\n      done = true;\n      reject(self, reason);\n    });\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype.catch = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.all = function(arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function(resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(val, function(val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n/**\n * Set the immediate function to execute callbacks\n * @param fn {function} Function to execute\n * @private\n */\nPromise._setImmediateFn = function _setImmediateFn(fn) {\n  asap = fn;\n};\n\nPromise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n  onUnhandledRejection = fn;\n};\n\nmodule.exports = Promise;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/runtime-shared/src/promise.js"],"sourceRoot":""}