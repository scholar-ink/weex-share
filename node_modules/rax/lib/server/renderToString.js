'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = renderToString;

var _host = require('../vdom/host');

var _host2 = _interopRequireDefault(_host);

var _server = require('../drivers/server');

var _server2 = _interopRequireDefault(_server);

var _render = require('../render');

var _render2 = _interopRequireDefault(_render);

var _serializer = require('./serializer');

var _serializer2 = _interopRequireDefault(_serializer);

var _driver = require('../driver');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function renderToString(element) {
  // Reset driver iternal state
  _server2.default.nodeMaps = {};
  _server2.default.nodeCounter = 0;

  (0, _driver.setDriver)(_server2.default);

  // Reset host state
  _host2.default.rootComponents = {};
  _host2.default.rootInstances = {};
  _host2.default.mountID = 1;

  var body = _server2.default.createBody();
  (0, _render2.default)(element, body);
  return new _serializer2.default(body).serialize();
}