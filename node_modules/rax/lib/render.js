'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _injectComponent = require('./vdom/injectComponent');

var _injectComponent2 = _interopRequireDefault(_injectComponent);

var _instance = require('./vdom/instance');

var _instance2 = _interopRequireDefault(_instance);

var _unit = require('./style/unit');

var _driver = require('./driver');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function render(element, container, callback) {
  // Inject component
  (0, _injectComponent2.default)();
  // Inject driver
  (0, _driver.injectDriver)();

  var driver = (0, _driver.getDriver)();

  // Before render callback
  driver.beforeRender && driver.beforeRender(element, container);

  // Real native root node is body
  if (container == null) {
    container = driver.createBody();
  }

  var rootComponent = _instance2.default.render(element, container);
  var component = rootComponent.getPublicInstance();

  if (callback) {
    callback.call(component);
  }
  // After render callback
  driver.afterRender && driver.afterRender(component);

  return component;
}

exports.default = render;